@use '../components/background-theme';
@use '../components/spacing';
@use '../components/input-style';
@use '../components/textarea';
@use '../components/icon-button';
@use '../components/editor';

// JS classList add & remove
button {
  display: none;
}
button.show {
  display: inline-block;
}

// TASK HEADER
.task_header {
  @extend %task-general-background;
  @extend %task-header-spacing;

  // main form
  form {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
  }
  input {
    @extend %check-input;
  }
  textarea {
    @extend %header-text;
  }

  .marker_group {
    @extend %marker-icon;
    font-size: 0; // 消除<i>inline-block間距
  }

  // task info
  .info_group,
  .info_group > * {
    display: none;
  }
  &.more_info {
    .show {
      display: inline-block;
    }
    .info_group {
      @extend %record-icon;
      display: flex;
      align-items: center;
    }
  }
}

// TASK BODY
.task_body {
  @extend %task-body-spacing;
  @extend %task-general-background;

  .edit_item + .edit_item {
    margin-top: 24px;
  }

  .edit_item {
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;

    font-size: 0; // 消除inline-block間距

    > label {
      @extend %editor-title;

      i {
        @extend %editor-icon;
      }
    }
  }

  .edit_content {
    margin-left: 28px;
  }

  .deadline input {
    @include input-style.content-input(162px, 35px);
    @extend %edit-date;
  }

  .file {
    .edit_content {
      display: flex;
      align-items: center;
    }
    .file_data {
      margin-right: 24px;
      @extend %editor-content;
    }
    input {
      @extend %edit-upload;
    }
  }

  .comment textarea {
    @include input-style.content-input(100%, 120px);
  }
}

.task_footer {
  height: 60px;
  display: flex;
  flex-direction: row;

  button {
    flex: 1 0 0;
  }

  .task_cancel {
    @extend %reset-button;

    border-radius: 0 0 0 5px;
  }
  .task_add,
  .task_save {
    @extend %submit-button;

    border-radius: 0 0 5px 0;
  }

  i {
    margin-right: 16px;
  }
}

// WHOLE TASK
.task {
  margin-bottom: 24px;
  border-radius: 5px;

  &_header.major {
    @extend %task-major-background;
  }
}

// status: marker_link icon
// 點擊".icon_checkbox"，增加".task_done"
.task,
.task.task_done {
  .marker_link_star {
    display: inline-block;
  }
  .marker_link_fullstar {
    display: none;
  }
}

// 點擊".marker_link_fullstar"，增加".task_important"
.task.task_important {
  .marker_link_star {
    display: none;
  }
  .marker_link_fullstar {
    display: inline-block;
  }
}

// status: edit mode
// 展開編輯區塊:
// (1)聚焦".add_item:focus" --> 增加".task_edit_mode"
// (2)點擊".marker_link_pen" --> 增加".task_edit_mode"
// 收合編輯區塊:
// (1)點擊".task_button_add" --> 增加".exist_task"，刪除".add_task"及".task_edit_mode"
// (2)點擊".task_button_save" --> 刪除".task_edit_mode"
// (3)點擊".task_button_cancel" --> 刪除".task_edit_mode"
.add_task {
  &:focus {
    display: none;
  }

  ~ .task {
    display: none;

    &.task_edit_mode {
      display: block;

      .marker_link_edit {
        display: inline-block;
      }
      .marker_link_pen {
        display: none;
      }
      .task_button_add {
        display: block;
      }
      .task_button_save {
        display: none;
      }
    }
  }
}

.exist_task {
  display: none;

  ~ .task {
    display: block;

    .marker_link_edit {
      display: none;
    }
    .marker_link_pen {
      display: inline-block;
    }
    .task_edit_group {
      display: none;
    }

    &.task_edit_mode {
      .marker_link_edit {
        display: inline-block;
      }
      .marker_link_pen {
        display: none;
      }
      .task_edit_group {
        display: block;
      }
      .task_button_add {
        display: none;
      }
      .task_button_save {
        display: block;
      }
    }
  }
}

// status: record_link icon
// 在編輯模式及完成任務的情況下，不顯示.info_group
.task_edit_mode,
.task_done {
  .info_group {
    display: none;
  }
}
